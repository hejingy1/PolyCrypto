from polygon import WebSocketClient
from polygon.websocket.models import WebSocketMessage, Market, Feed
from typing import List

c = WebSocketClient(market=Market.Crypto, subscriptions=["XT.ETH-USD"], api_key="vyEZKZQExqHm6QEiT7LbMCCNrxvxHU0J", feed=Feed.RealTime)


def handle_msg(msgs: List[WebSocketMessage]):
    for m in msgs:
        print(m)


c.run(handle_msg)